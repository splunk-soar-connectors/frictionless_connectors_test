name: Call Publish Workflow

on:
  pull_request:
    branches-ignore:
      - main  # Runs only on non-main branches
    types:
      - opened       # When a new PR is opened
      - synchronize  # When a new commit is pushed to the PR branch
jobs:
  call-publish:
    uses: splunk-soar-connectors/.github/.github/workflows/publish.yml@mnordby/purge-unreleased-notes
    secrets:
      release_queue_url: ${{ secrets.RELEASE_QUEUE_URL }}
      splunkbase_user: ${{ secrets.SPLUNKBASE_USER }}
      splunkbase_password: ${{ secrets.SPLUNKBASE_PASSWORD }}
